import sys, os
sys.path.append(os.path.join(os.path.dirname(__file__), '..', 'API'))
import info
import contest
import paper

school = info.Domain('bvl','bvl')

list_contest = [9330388, 9331983, 9332690, 9332865, 9334581, 9336240, 9336573, 9337297, 9337947, 9338233, 9338436, 9338494, 9338705, 9339774, 9339904, 9340168, 9340363, 9342349, 9343020, 9343765, 9343896, 9344537, 9344602, 9344886, 9347042, 9347350, 9347587, 9347848, 9349037, 9349161, 9349573, 9349983, 9350109, 9350470, 9352470, 9353857, 9354482, 9354622, 9355093, 9356563, 9358717, 9359708, 9360177, 9362965, 9363825, 9364068, 9365330, 9365698, 9366082, 9366781, 9366996, 9367112, 9367165, 9367308, 9368408, 9371088, 9371256, 9372919, 9373522, 9373569, 9374805, 9376827, 9377727, 9380751, 9384824, 9387475, 9442635, 9447213, 9206386, 9325088, 9332105, 9332666, 9332841, 9334557, 9336216, 9336537, 9337238, 9337923, 9338470, 9338567, 9338681, 9339750, 9339880, 9340062, 9340396, 9340758, 9342134, 9342759, 9342996, 9343345, 9343800, 9343872, 9344513, 9344578, 9344862, 9347326, 9347563, 9347824, 9349137, 9349549, 9349959, 9350085, 9350446, 9352446, 9354516, 9354916, 9355004, 9355069, 9356336, 9356539, 9358693, 9359684, 9362931, 9363801, 9363992, 9364044, 9364602, 9365306, 9366972, 9367088, 9367141, 9367284, 9367649, 9367687, 9367831, 9367941, 9368720, 9370490, 9370535, 9370679, 9370879, 9370925, 9371064, 9371232, 9372894, 9373498, 9373689, 9374063, 9376803, 9377301, 9379324, 9382114, 9384800, 9387451, 9388039, 9394376, 9441465, 9447452, 9450768 ]

for contest_iid in list_contest:
    print(f"Xử lý contest {contest_iid}")
    exam_rounds =  contest.exam_rounds(school, contest_iid)
    for round in exam_rounds:
        papers = paper.search(school, round)
        if papers:
            for pape in papers:
                paper.unset(school,pape['id'])
        else:
            print(f"Round {round['name']} không có đề trộn nào")
            pass
        paper.new(school,count=50,random=1,shuffle=1,round=round)